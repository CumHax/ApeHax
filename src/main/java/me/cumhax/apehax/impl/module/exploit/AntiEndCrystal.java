package me.cumhax.apehax.impl.module.exploit;

import org.lwjgl.input.Mouse;

import me.cumhax.apehax.api.module.Category;
import me.cumhax.apehax.api.module.Module;
import net.minecraft.entity.Entity;
import net.minecraft.entity.item.EntityEnderCrystal;
import net.minecraft.util.text.TextComponentString;
import net.minecraftforge.fml.common.eventhandler.SubscribeEvent;
import net.minecraftforge.fml.common.gameevent.TickEvent;

public class AntiEndCrystal extends Module {

	public AntiEndCrystal(String name, String description, Category category) {
		super(name, description, category);
	}

	@SubscribeEvent
	public void onTick(TickEvent.ClientTickEvent event) {
		if (mc.player == null) {
			return;
		}

		for (Entity e : mc.world.loadedEntityList) {
			if (e instanceof EntityEnderCrystal) {
				if (mc.player.getDistanceSq(e) <= 3.8f && !Mouse.isButtonDown(1) && e.isEntityAlive()) {
					mc.player.connection.getNetworkManager()
							.closeChannel(new TextComponentString("ENDER CRYSTAL IN RANGE"));
					this.toggle();
					break;
				}
			}
		}

	}

}
