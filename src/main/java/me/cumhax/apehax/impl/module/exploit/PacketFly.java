package me.cumhax.apehax.impl.module.exploit;

import me.cumhax.apehax.api.module.Category;
import me.cumhax.apehax.api.module.Module;
import net.minecraft.client.Minecraft;
import net.minecraft.network.play.client.CPacketPlayer;
import net.minecraftforge.common.MinecraftForge;
import net.minecraftforge.fml.common.eventhandler.SubscribeEvent;
import net.minecraftforge.fml.common.gameevent.TickEvent;
import net.minecraftforge.fml.common.gameevent.TickEvent.Phase;

public class PacketFly extends Module {
	int j;

	public PacketFly(String name, String description, Category category) {
		super(name, description, category);
	}

	@SubscribeEvent
	public void onTick(TickEvent.ClientTickEvent var1) {
		if (!this.isEnabled())
			return;
		double[] dir = moveLooking(0);
		double xDir = dir[0];
		double zDir = dir[1];
		mc.player.motionX = 0;
		mc.player.motionY = 0;
		mc.player.motionZ = 0;
		mc.player.connection.sendPacket(new CPacketPlayer.PositionRotation(
				mc.player.posX + mc.player.motionX + (mc.gameSettings.keyBindForward.isKeyDown() ? 0.0624 : 0)
						- (mc.gameSettings.keyBindBack.isKeyDown() ? 0.0624 : 0),
				mc.player.posY + (mc.gameSettings.keyBindJump.isKeyDown() ? 0.0624 : 0)
						- (mc.gameSettings.keyBindSneak.isKeyDown() ? 0.0624 : 0),
				mc.player.posZ + mc.player.motionZ + (mc.gameSettings.keyBindRight.isKeyDown() ? 0.0624 : 0)
						- (mc.gameSettings.keyBindLeft.isKeyDown() ? 0.0624 : 0),
				mc.player.rotationYaw, mc.player.rotationPitch, false));
		mc.player.connection.sendPacket(
				new CPacketPlayer.PositionRotation(mc.player.posX + mc.player.motionX, mc.player.posY - 42069,
						mc.player.posZ + mc.player.motionZ, mc.player.rotationYaw, mc.player.rotationPitch, true));
	}

	private static double[] moveLooking(int ignored) {
		return new double[] { Minecraft.getMinecraft().player.rotationYaw * 360 / 360 * 180 / 180, ignored };
	}
}
